#!/bin/bash -eu

declare -a ARGS=()
declare OPTION_HOST="127.0.0.1"
declare OPTION_PORT="3600"

while (( "$#" )); do
  case $1 in
    -h=*|--host=*)
      OPTION_HOST="${1#*=}"
      shift
      ;;
    -p=*|--port=*)
      OPTION_PORT="${1#*=}"
      shift
      ;;
    -*|--*)
      echo "Unknown option $1"
      exit 1
      ;;
    *)
      ARGS+=("$1")
      shift
      ;;
  esac
done

set -- "${ARGS[@]}"

if [[ -d "${ARGS[0]}" ]]; then
  echo "[error] Directory already exists: ${ARGS[0]}";
  exit 2
fi
