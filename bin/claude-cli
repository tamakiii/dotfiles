#!/usr/bin/env bash

# Use XDG_CONFIG_HOME or default to ~/.config
XDG_CONFIG_HOME="${XDG_CONFIG_HOME:-$HOME/.config}"

# Default arguments
DEFAULT_ARGS=(--mcp-config "$XDG_CONFIG_HOME/claude/mcp.json")

# Start building final arguments
ARGS=()

# Add defaults that aren't already provided by user
i=0
while [ $i -lt ${#DEFAULT_ARGS[@]} ]; do
    option="${DEFAULT_ARGS[$i]}"
    if [[ ! " $* " =~ " $option " ]]; then
        ARGS+=("${DEFAULT_ARGS[$i]}" "${DEFAULT_ARGS[$((i+1))]}")
    fi
    ((i+=2))
done

# Add all user arguments
ARGS+=("$@")

claude "${ARGS[@]}"
