name: CI

on: [push]

jobs:
  test:
    runs-on: macos-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v1
    - name: Brew config
      run: brew config
    - name: Uninstall default node
      run: brew uninstall node@12
    - name: Make install
      run: |
        SKIP_BREW=1 bash etc/init/init.sh
    - name: Cleanup some brew downloads
      run: cd ${{ steps.brew-cache.outputs.dir }} && ls -lsS | head -n 10 | awk '{ print $10 }' | xargs rm -rf
